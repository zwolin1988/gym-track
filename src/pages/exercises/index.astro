---
import Layout from "@/layouts/Layout.astro";

export const prerender = false;

const user = Astro.locals.user;

if (!user) {
  return Astro.redirect("/auth/login");
}
---

<Layout title="Exercises - Gym Track">
  <div class="container mx-auto px-4 py-8 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold tracking-tight sm:text-4xl">Baza ćwiczeń</h1>
      <p class="mt-2 text-muted-foreground">Przeglądaj i filtruj ponad 50 ćwiczeń</p>
    </div>

    <!-- Filters Section -->
    <div class="mb-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
      <!-- Search -->
      <div class="lg:col-span-2">
        <label for="search" class="sr-only">Szukaj</label>
        <input
          type="text"
          id="search"
          placeholder="Szukaj ćwiczenia..."
          class="w-full rounded-lg border bg-background px-4 py-2"
        />
      </div>

      <!-- Category Filter -->
      <div>
        <label for="category" class="sr-only">Kategoria</label>
        <select id="category" class="w-full rounded-lg border bg-background px-4 py-2">
          <option value="">Wszystkie kategorie</option>
          <!-- Categories will be loaded dynamically -->
        </select>
      </div>

      <!-- Difficulty Filter -->
      <div>
        <label for="difficulty" class="sr-only">Trudność</label>
        <select id="difficulty" class="w-full rounded-lg border bg-background px-4 py-2">
          <option value="">Wszystkie poziomy</option>
          <option value="easy">Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
        </select>
      </div>
    </div>

    <!-- Exercises Grid -->
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <!-- Exercise Card Template - will be populated dynamically -->
      <div class="rounded-lg border bg-card p-6 shadow-sm">
        <div class="mb-4 aspect-video w-full rounded-lg bg-muted"></div>
        <h3 class="mb-2 text-lg font-semibold">Exercise Name</h3>
        <p class="mb-2 text-sm text-muted-foreground">Category • Difficulty</p>
        <p class="text-sm text-muted-foreground line-clamp-2">Description...</p>
        <a href="/exercises/[id]" class="mt-4 inline-block text-sm text-primary hover:underline">
          Zobacz szczegóły →
        </a>
      </div>
    </div>

    <!-- Empty State -->
    <div class="rounded-lg border bg-card p-12 text-center shadow-sm hidden" id="empty-state">
      <span class="material-symbols-outlined mb-4 text-6xl text-muted-foreground">search_off</span>
      <h3 class="mb-2 text-lg font-semibold">Nie znaleziono ćwiczeń</h3>
      <p class="text-sm text-muted-foreground">Spróbuj zmienić filtry</p>
    </div>

    <!-- Pagination -->
    <div class="mt-8 flex items-center justify-between">
      <p class="text-sm text-muted-foreground">
        Showing <span class="font-medium">1</span> to <span class="font-medium">20</span> of
        <span class="font-medium">50</span> results
      </p>
      <div class="flex gap-2">
        <button
          class="rounded-lg border bg-background px-4 py-2 text-sm hover:bg-muted disabled:opacity-50"
          disabled
        >
          Previous
        </button>
        <button class="rounded-lg border bg-background px-4 py-2 text-sm hover:bg-muted">
          Next
        </button>
      </div>
    </div>
  </div>
</Layout>

<script>
  // Client-side functionality will be added here
  console.log("Exercises page loaded");
</script>
