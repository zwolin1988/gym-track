---
import Layout from "@/layouts/Layout.astro";

export const prerender = false;

const user = Astro.locals.user;

if (!user) {
  return Astro.redirect("/auth/login");
}

const { id } = Astro.params;
---

<Layout title="Category - Gym Track">
  <div class="container mx-auto px-4 py-8 sm:px-6 lg:px-8">
    <!-- Back Button -->
    <a href="/categories" class="mb-6 inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground">
      <span class="material-symbols-outlined text-base">arrow_back</span>
      Powrót do kategorii
    </a>

    <!-- Category Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold tracking-tight sm:text-4xl">Category Name</h1>
      <p class="mt-2 text-muted-foreground">Category description will be loaded here</p>
    </div>

    <!-- Exercises in this category -->
    <div class="mb-4">
      <h2 class="text-xl font-semibold">Ćwiczenia w tej kategorii</h2>
      <p class="text-sm text-muted-foreground">X ćwiczeń</p>
    </div>

    <!-- Exercises Grid -->
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <!-- Exercise Card Template -->
      <a
        href="/exercises/[id]"
        class="group overflow-hidden rounded-lg border bg-card shadow-sm transition-all hover:border-primary hover:shadow-md"
      >
        <div class="aspect-video w-full bg-muted"></div>
        <div class="p-6">
          <h3 class="mb-2 text-lg font-semibold group-hover:text-primary">Exercise Name</h3>
          <p class="mb-2 text-sm text-muted-foreground">Difficulty</p>
          <p class="text-sm text-muted-foreground line-clamp-2">
            Description...
          </p>
        </div>
      </a>
    </div>

    <!-- Empty State -->
    <div class="rounded-lg border bg-card p-12 text-center shadow-sm hidden" id="empty-state">
      <span class="material-symbols-outlined mb-4 text-6xl text-muted-foreground">exercise</span>
      <h3 class="mb-2 text-lg font-semibold">Brak ćwiczeń w tej kategorii</h3>
      <p class="text-sm text-muted-foreground">Sprawdź inne kategorie</p>
    </div>
  </div>
</Layout>

<script define:vars={{ categoryId: id }}>
  console.log("Category detail page loaded, ID:", categoryId);
</script>
